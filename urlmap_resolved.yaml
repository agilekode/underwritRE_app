kind: compute#urlMap
name: uwr-urlmap

# REQUIRED: fallback if no host/path matches
defaultService: https://www.googleapis.com/compute/v1/projects/underwritre/global/backendServices/uwr-backend

hostRules:
  - hosts: ["app.underwritre.com"]
    pathMatcher: "pm-app"
  - hosts: ["www.app.underwritre.com"]
    pathMatcher: "pm-www-redirect"

pathMatchers:
  - name: "pm-app"
    defaultService: https://www.googleapis.com/compute/v1/projects/underwritre/global/backendServices/uwr-backend

  - name: "pm-www-redirect"
    defaultUrlRedirect:
      redirectResponseCode: MOVED_PERMANENTLY_DEFAULT
      httpsRedirect: true
      hostRedirect: "app.underwritre.com"